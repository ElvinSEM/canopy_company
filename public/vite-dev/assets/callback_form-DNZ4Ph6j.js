document.addEventListener("turbo:load",()=>{const e=document.querySelector("#callback-form");e&&e.addEventListener("submit",async r=>{r.preventDefault();let o=new FormData(e),a=e.querySelector("input[type=submit]");a.disabled=!0;try{let t=await fetch(e.action,{method:"POST",body:o,headers:{"X-Requested-With":"XMLHttpRequest"}}),l=await t.json();t.ok?(alert("Спасибо! Мы скоро свяжемся с вами."),e.reset(),bootstrap.Modal.getInstance(document.querySelector("#callback-modal")).hide()):alert("Ошибка: "+l.error)}catch(t){console.error("Ошибка отправки:",t)}finally{a.disabled=!1}})});
