document.addEventListener("turbo:load",()=>{const e=document.querySelector("#lead-form");e&&e.addEventListener("submit",async r=>{r.preventDefault();let o=new FormData(e),a=e.querySelector("input[type=submit]");a.disabled=!0;try{let t=await fetch(e.action,{method:"POST",body:o,headers:{"X-Requested-With":"XMLHttpRequest"}}),d=await t.json();t.ok?(alert("Спасибо! Ваша заявка отправлена."),e.reset(),bootstrap.Modal.getInstance(document.querySelector("#leadModal")).hide()):alert("Ошибка: "+d.error)}catch(t){console.error("Ошибка отправки:",t)}finally{a.disabled=!1}})});
