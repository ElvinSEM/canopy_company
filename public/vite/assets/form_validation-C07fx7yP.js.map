{"version":3,"file":"form_validation-C07fx7yP.js","sources":["../../../app/javascript/entrypoints/form_validation.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n    const form = document.getElementById(\"lead-form\");\n    if (!form) return;\n\n    const submitButton = form.querySelector(\"button[type='submit']\");\n\n    form.addEventListener(\"submit\", function (event) {\n        event.preventDefault(); // Останавливаем стандартную отправку формы\n\n        if (!form.checkValidity()) {\n            form.classList.add(\"was-validated\"); // Добавляем Bootstrap-валидацию\n            return;\n        }\n\n        // Показываем подтверждение отправки\n        if (!confirm(\"Вы уверены, что хотите отправить заявку?\")) return;\n\n        const formData = new FormData(form);\n        submitButton.disabled = true; // Блокируем кнопку во время отправки\n\n        fetch(form.action, {\n            method: \"POST\",\n            body: formData,\n            headers: {\n                \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content\n            }\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (data.error) {\n                    alert(\"Ошибка: \" + data.error);\n                } else {\n                    alert(\"Заявка успешно отправлена!\");\n                    form.reset();\n                    form.classList.remove(\"was-validated\");\n                }\n            })\n            .catch(error => console.error(\"Ошибка:\", error))\n            .finally(() => {\n                submitButton.disabled = false; // Разблокируем кнопку после завершения\n            });\n    });\n});\n"],"names":["form","submitButton","event","formData","response","data","error"],"mappings":"AAAA,SAAS,iBAAiB,mBAAoB,UAAY,CACtD,MAAMA,EAAO,SAAS,eAAe,WAAW,EAChD,GAAI,CAACA,EAAM,OAEX,MAAMC,EAAeD,EAAK,cAAc,uBAAuB,EAE/DA,EAAK,iBAAiB,SAAU,SAAUE,EAAO,CAG7C,GAFAA,EAAM,eAAc,EAEhB,CAACF,EAAK,gBAAiB,CACvBA,EAAK,UAAU,IAAI,eAAe,EAClC,MACZ,CAGQ,GAAI,CAAC,QAAQ,0CAA0C,EAAG,OAE1D,MAAMG,EAAW,IAAI,SAASH,CAAI,EAClCC,EAAa,SAAW,GAExB,MAAMD,EAAK,OAAQ,CACf,OAAQ,OACR,KAAMG,EACN,QAAS,CACL,eAAgB,SAAS,cAAc,yBAAyB,EAAE,OAClF,CACS,CAAA,EACI,KAAKC,GAAYA,EAAS,KAAM,CAAA,EAChC,KAAKC,GAAQ,CACNA,EAAK,MACL,MAAM,WAAaA,EAAK,KAAK,GAE7B,MAAM,4BAA4B,EAClCL,EAAK,MAAO,EACZA,EAAK,UAAU,OAAO,eAAe,EAE5C,CAAA,EACA,MAAMM,GAAS,QAAQ,MAAM,UAAWA,CAAK,CAAC,EAC9C,QAAQ,IAAM,CACXL,EAAa,SAAW,EACxC,CAAa,CACb,CAAK,CACL,CAAC"}